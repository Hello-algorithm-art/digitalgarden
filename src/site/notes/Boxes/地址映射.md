---
{"dg-publish":true,"permalink":"/Boxes/地址映射/","dgPassFrontmatter":true,"created":"2025-04-29T19:08:22.261+08:00","updated":"2025-05-17T11:15:29.379+08:00"}
---

<font color=red><b>如何确定主存各字段位数</b></font>
1. 根据寻址方式确定主存地址总共多少位
2. 根据Cache块的大小确定块内地址多少位
3. 分情况
	1. 如果是全相联映射，其余均为主存块号
	2. 如果是直接相联映射，确定Cache中多少行，确定行号所占位数
	3. 如果是组相联映射，确定Cache中多少组，确定组号所占位数
4. 其余做标记

## 直接映射
- 主存块号对行数取模运算确定固定位置
- Cache块数2^n 次方，则主存块号末尾n位反映位置，将主存剩余位做标记即可 
![file-20250430154025677.png](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430154025677.png)
优点：查找标记快
缺点：存储空间利用不充分，命中率低
## 全相联映射
优点：存储空间利用充分，命中率高
缺点：查找标记慢，成本高（因为要比较22位，需要较多比较器）
 ![file-20250430153655686.png](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430153655686.png)
## 组相联映射
- 将Cache进行分组，主存块号对组数取模确定位置
![file-20250430180402268.png](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430180402268.png)
![file-20250430175200779.png|400](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430175200779.png)
![file-20250430180143381.png|400](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430180143381.png)
![file-20250430181604827.png|400](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430181604827.png)
![file-20250430184111743.png|400](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430184111743.png)
![file-20250430190407361.png|500](/img/user/images/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84/file-20250430190407361.png)
一句程序对数组元素访问两次，一个字块可以存四个数组元素
当第一次访问每组第一个时，未命中，将相邻四个数组元素调入Cache，
总共访问八次，只有第一次未命中。