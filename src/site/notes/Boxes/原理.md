---
{"dg-publish":true,"permalink":"/Boxes/原理/","dgPassFrontmatter":true,"created":"2025-04-29T16:16:01.159+08:00","updated":"2025-05-17T11:15:27.124+08:00"}
---

**效率保留一位小数，命中率保留整数，舍去**
## 程序访问的局部性原理
时间局部性，当前正在使用，将来也会使用
空间局部性，当前正在使用，相邻的数据将来会用到

## 1.工作原理
### 为什么不需要Cache地址
Cache中的数据和指令访问的顺序不是按照Cache的地址顺序来，对照主存地址才能找到
### 按块编址
块内地址位数相同，主存Cache块内地址的值也相同
Cache上**标记**主存块号与Cache块的映射关系
## 2.命中与未命中
命中：主存块调入缓存
命中率与Cache的**容量**和**块长**有关，
- 块长过小，信息很快用光，还要去内存取
- 块长过大，Cache容纳的块数少
- 一般取4-8字
#### 块长取一个存储周期内从主存调出信息长度
## 3.Cache-主存系统的效率
若访问Cache和访问内存并行进行
![file-20250429163019774.png|300](/img/user/images/%E5%8E%9F%E7%90%86/file-20250429163019774.png)
最小值tc/tm，命中率为0
最大值1，每次都命中
## 性能提升倍数
分两种策略
- 同时访问Cache和主存，Cache命中时中断访存
- 先访问Cache，没有时再访问主存，调入Cache
![file-20250430152103660.png|600](/img/user/images/%E5%8E%9F%E7%90%86/file-20250430152103660.png)
## 4.基本结构
![file-20250429185932668.png|400](/img/user/images/%E5%8E%9F%E7%90%86/file-20250429185932668.png)
- 将主存块调入Cache的任务由CPU（硬件）完成
地址映射是一种规则，主存当中的块可以放到Cache的哪些块
变换机构主存块号转Cache地址
## 5.读写操作
![file-20250429190138024.png|400](/img/user/images/%E5%8E%9F%E7%90%86/file-20250429190138024.png)
主存Cache一致性问题
 - 写直达，既写入Cache又写入主存
	 - Cache块退出，不用写入主存
	 - 读操作不涉及主存的写操作
- 写回法
	- 只对Cache更新，直到Cache块退出，写入主存
	- 读操作失效需要替换，涉及主存的写操作
		- 还是与写回法相联系的，因为如果是写直达法，数据已经一致了，不需要写回
## 6.改进
增加级数，
统一缓存，指令和数据在同一缓存内
分立缓存
